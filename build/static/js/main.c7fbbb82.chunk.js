(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"categoryTypes":["Paths","Patterns","Landscaping","Decor","Art","Flags","Sign","Clothing","Stalls"]}')},35:function(e,t,a){e.exports=a(71)},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),l=a(2),i=a(5),u=a(11),o=function(e){var t=e.isLoggedIn,a=e.classes,n=e.id;return r.a.createElement("ul",{className:a,id:n},r.a.createElement("li",null,r.a.createElement(i.c,{to:"/"},"Home")),t?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(i.c,{to:"/add"},"Add Design")),r.a.createElement("li",null,r.a.createElement(i.c,{to:"/dashboard"},"Manage Designs")),r.a.createElement("li",null,r.a.createElement(i.c,{to:"/logout",className:"waves-effect waves-light btn"},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(i.c,{to:"/login",className:"waves-effect waves-light btn"},"Login")),r.a.createElement("li",null,r.a.createElement(i.c,{to:"/createaccount",className:"waves-effect waves-light btn purple darken-2"},"Create Account"))))},m=a(17),p=a(1),d=a.n(p),f=a(3),g=a(9),h=a.n(g),v=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/api/designs");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/api/designs?category=".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/api/designs/".concat(t,"/").concat(a));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),w=a(34),N=a.n(w),O=function(e){var t=e.result,a=e.icon,n=e.onClick,c=function(e){n(e,"thumb_down"===a?"down":"up")};return r.a.createElement("a",{className:"right small-right-margin",onClick:function(){return c(t.id)}},r.a.createElement("div",{className:"chip rate-chip"},r.a.createElement("i",{className:"material-icons"},a),r.a.createElement("span",null,"thumb_down"===a?t.downvotes:t.upvotes)))},j=function(e){var t=e.result,a=e.passNewResults,n=function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"up"!==n){e.next=8;break}return e.next=4,b(t,"up");case 4:r=e.sent,a(r),e.next=13;break;case 8:if("down"!==n){e.next=13;break}return e.next=11,b(t,"down");case 11:c=e.sent,a(c);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),alert(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(N.a,{height:400,offset:100},r.a.createElement("div",{className:"col s12 m6 l6"},r.a.createElement("div",{className:"card large"},r.a.createElement("div",{className:"card-image"},r.a.createElement("img",{src:t.imageUrl,alt:t.designName}),r.a.createElement("span",{className:"card-title"},t.designName)),r.a.createElement("div",{className:"card-content"},r.a.createElement("p",null,r.a.createElement("span",{className:"card-qualifier"},"Design ID:"),r.a.createElement("span",{className:"uppercase"},t.customDesignId)),r.a.createElement("p",null,r.a.createElement("span",{className:"card-qualifier"},"Creator ID:"),r.a.createElement("span",{className:"uppercase"},t.creatorId)),t.designCategory.map((function(e){return r.a.createElement("div",{key:e,className:"chip z-depth-1 purple lighten-3 capitialize card-category"},e)}))),r.a.createElement("div",{className:"card-action light-green lighten-5"},r.a.createElement("a",{className:"btn-floating waves-effect waves-light grey lighten-1"},r.a.createElement("i",{className:"material-icons"},"favorite")),r.a.createElement(O,{result:t,icon:"thumb_down",onClick:n}),r.a.createElement(O,{result:t,icon:"thumb_up",onClick:n})))))},y=a(16),x=(a(67),function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),i=Object(l.a)(s,2),u=i[0],o=i[1],p=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,c(g(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){p()}),[]);var g=function(e){return e.sort((function(e,t){return t.upvotes-e.upvotes}))},h=function(e){var t=a.filter((function(t){return t.id!==e.id})),n=[].concat(Object(m.a)(t),[e]);c(g(n))},b=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:a=e.sent,c(g(a)),o(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){o(""),p()};return r.a.createElement("div",null,r.a.createElement("div",{className:"row section"},r.a.createElement("div",{className:"col s12 "},r.a.createElement("span",{id:"filter-label"},"Filter by Category:"),y.categoryTypes.map((function(e){return e===u?r.a.createElement("div",{className:"chip z-depth-1 purple lighten-3 clickable",onClick:w},e,r.a.createElement("i",{class:"material-icons close-icon"},"close")):r.a.createElement("div",{className:"chip clickable",onClick:function(){return b(e)}},e)})))),r.a.createElement("div",{className:"row"},a.map((function(e){return r.a.createElement(j,{key:e.id,result:e,passNewResults:h})}))))}),k=(a(68),function(){return r.a.createElement("div",null)}),C=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/api/designs/upload",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:"bearer ".concat(t)}},e.next=4,h.a.post("/api/designs",a,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(0),Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),D=(a(69),function(e){var t=e.token,a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],i=c[1],u=Object(n.useState)([]),o=Object(l.a)(u,2),p=o[0],g=o[1],h=Object(n.useState)(""),v=Object(l.a)(h,2),E=v[0],b=v[1],w=Object(n.useState)(""),N=Object(l.a)(w,2),O=N[0],j=N[1],x=Object(n.useState)(""),k=Object(l.a)(x,2),D=k[0],L=k[1],I=Object(n.useState)(""),F=Object(l.a)(I,2),A=F[0],P=F[1],q=Object(n.useState)(""),T=Object(l.a)(q,2),J=T[0],Y=T[1],B=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("designImage",D),e.next=5,C(t);case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(0),z("error","Your design image failed to save. Please try again later.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(f.a)(d.a.mark((function e(){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s||0===p.length||!O||!D||17!==O.length||17!==E.length){e.next=16;break}return e.prev=1,e.next=4,B();case 4:return a=e.sent,n={name:s,category:p,creatorId:E,designId:O,image:a.imageLocation},e.next=8,S(t,n);case 8:z("success","Your design was added to the Gallery!"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),z("error","Your design failed to save. Ensure your design ID isn't already in the database.");case 14:e.next=17;break;case 16:z("error","Please fill in each required field before submitting!");case 17:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}(),z=function(e,t){window.scroll(0,0),"success"===e?P(t):Y(t),setTimeout((function(){P(""),Y("")}),8e3)};return r.a.createElement("article",{className:"row background"},r.a.createElement("div",{className:"col s12"},r.a.createElement("h2",null,"Add Your Design"),r.a.createElement("p",null,"Want to showcase your creativity in the Custom Design Database? Add it here!"),r.a.createElement("p",null,"* denotes required fields."),A&&r.a.createElement("h4",{className:"user-message"},A),J&&r.a.createElement("h4",{className:"error-message"},J),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"design-name-input",type:"text",value:s,onChange:function(e){return i(e.target.value)},maxLength:"40",required:!0}),r.a.createElement("label",{htmlFor:"design-name-input"},"Design Name*")),r.a.createElement("p",{className:"help-text"},"Design name should be descriptive so others can find it! Maximum of 40 characters.")),r.a.createElement("div",{className:"row"},r.a.createElement("label",{className:"col s12 custom-label"},"Design Category*"),r.a.createElement("p",{className:"help-text"},"Select as many categories that apply to your design."),y.categoryTypes.map((function(e){return r.a.createElement("label",{key:e,className:"col s12 m4 l4"},r.a.createElement("input",{type:"checkbox",name:e,onChange:function(e){return function(e){if(p.includes(e)){var t=p.filter((function(t){return t!==e}));g(t)}else g([].concat(Object(m.a)(p),[e]))}(e.target.name)},required:!0}),r.a.createElement("span",null,e))}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"creator-input",type:"text",value:E,onChange:function(e){return b(e.target.value)},minLength:"17",maxLength:"17",className:"validate"}),r.a.createElement("label",{htmlFor:"creator-input"},"ACNH Creator ID")),r.a.createElement("p",{className:"help-text"},"ID should be 17 characters with dashes.")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"design-id-input",type:"text",value:O,onChange:function(e){return j(e.target.value)},minLength:"17",maxLength:"17",className:"validate",required:!0}),r.a.createElement("label",{htmlFor:"design-id-input"},"ACNH Design ID*")),r.a.createElement("p",{className:"help-text"},"ID should be 17 characters with dashes.")),r.a.createElement("div",{className:"row"},r.a.createElement("label",{className:"col s12 custom-label"},"Design Image*"),r.a.createElement("p",{className:"help-text"},"One file max. File type must be .jpg, .jpeg, or .png."),r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn "},r.a.createElement("span",null,"Choose Image"),r.a.createElement("input",{type:"file",onChange:function(e){return L(e.target.files[0])},accept:".jpg,.jpeg,.png",required:!0})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Upload one image file"})))),r.a.createElement("div",{className:"row"},r.a.createElement("button",{onClick:U,className:"btn-large waves-effect waves-light col s12 m8 l8 purple darken-2"},"Submit Design",r.a.createElement("i",{className:"material-icons right"},"send")))))}),L=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/api/users",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/api/users/login",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),F=function(e){var t=e.onLogin,a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],i=c[1],o=Object(n.useState)(""),m=Object(l.a)(o,2),p=m[0],g=m[1],h=Object(n.useState)(!1),v=Object(l.a)(h,2),E=v[0],b=v[1],w=Object(n.useState)(""),N=Object(l.a)(w,2),O=N[0],j=N[1],y=Object(u.f)();Object(n.useEffect)((function(){(window.localStorage.getItem("cddblogin")||E)&&(b(!0),y.push("/dashboard"))}),[E,y]);var x=function(){var e=Object(f.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,I({username:s,password:p});case 4:n=e.sent,t(n.token),window.localStorage.setItem("cddblogin",JSON.stringify(n.token)),i(""),g(""),b(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),k("Login failed. Please check your username and/or password for accuracy.");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){j(e),setTimeout((function(){j("")}),8e3)};return r.a.createElement("article",{className:"background"},r.a.createElement("form",{onSubmit:x},r.a.createElement("h1",null,"Login"),O&&r.a.createElement("h4",{className:"error-message"},O),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"username-input",className:"custom-label"},"Username:"),r.a.createElement("input",{id:"username-input",className:"col s12 input-field",type:"text",value:s,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"password-input",className:"custom-label"},"Password:"),r.a.createElement("input",{id:"password-input",className:"col s12 input-field",type:"password",value:p,onChange:function(e){return g(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit",className:"btn"},"Login"))))},A=function(e){var t=e.onLogout,a=Object(u.f)();return Object(n.useEffect)((function(){window.localStorage.removeItem("cddblogin"),t(),a.push("/")}),[a]),r.a.createElement("div",null,r.a.createElement("h1",null,"Logging out..."))},P=function(e){var t=e.onLogin,a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],o=c[1],m=Object(n.useState)(""),p=Object(l.a)(m,2),g=p[0],h=p[1],v=Object(n.useState)(""),E=Object(l.a)(v,2),b=E[0],w=E[1],N=Object(n.useState)(""),O=Object(l.a)(N,2),j=O[0],y=O[1],x=Object(n.useState)(""),k=Object(l.a)(x,2),C=k[0],S=k[1],D=Object(u.f)();Object(n.useEffect)((function(){window.localStorage.getItem("cddblogin")&&D.push("/dashboard")}),[D]);var I=function(){var e=Object(f.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,!(s?g?g===b||(F("Your passwords must match!"),0):(F("Please fill in the password fields."),0):(F("Please fill in the username field."),0))){e.next=13;break}return e.next=5,L({username:s,password:g,name:j});case 5:n=e.sent,t(n.token),window.localStorage.setItem("cddblogin",JSON.stringify(n.token)),y(""),o(""),h(""),w(""),D.push("/add");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),F("The username you've chosen is already taken. Please choose another.");case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),F=function(e){S(e),setTimeout((function(){S("")}),8e3)};return r.a.createElement("article",{className:"background"},r.a.createElement("h1",null,"Create an account"),C&&r.a.createElement("h4",{className:"error-message"},C),r.a.createElement("form",{onSubmit:I},r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"name-input",className:"custom-label"},"Full Name"),r.a.createElement("input",{id:"name-input",className:"col s12 input-field",type:"text",value:j,onChange:function(e){return y(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"username-input",className:"custom-label"},"Username*"),r.a.createElement("input",{id:"username-input",className:"col s12 input-field",type:"text",value:s,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"password-input",className:"custom-label"},"Password*"),r.a.createElement("input",{id:"password-input",className:"col s12 input-field",type:"password",value:g,onChange:function(e){return h(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement("label",{htmlFor:"password2-input",className:"custom-label"},"Verify Password*"),r.a.createElement("input",{id:"password2-input",className:"col s12 input-field",type:"password",value:b,onChange:function(e){return w(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit",className:"btn"},"Create Account"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 info-message section"},"Already have an account? ",r.a.createElement(i.b,{to:"/login"},"Log in."))))};a(70);var q=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),m=Object(l.a)(s,2),p=m[0],d=m[1],f=function(e){c(!0),d(e)};return Object(n.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("cddblogin"));e&&(d(e),c(!0))}),[]),r.a.createElement("div",null,r.a.createElement(i.a,null,r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(i.b,{to:"/",className:"brand-logo"},"CDDB"),r.a.createElement("a",{href:"#","data-target":"mobile-menu",className:"sidenav-trigger"},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement(o,{isLoggedIn:a,classes:"right hide-on-med-and-down",id:"desktop-menu"}),r.a.createElement(o,{isLoggedIn:a,classes:"sidenav",id:"mobile-menu"})))),r.a.createElement("div",{className:"container"},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/add"},r.a.createElement(D,{token:p})),r.a.createElement(u.a,{path:"/dashboard"},r.a.createElement(k,null)),r.a.createElement(u.a,{path:"/login"},r.a.createElement(F,{onLogin:f})),r.a.createElement(u.a,{path:"/createaccount"},r.a.createElement(P,{onLogin:f})),r.a.createElement(u.a,{path:"/logout"},r.a.createElement(A,{onLogout:function(){c(!1),d("")}})),r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(x,null)))),r.a.createElement("footer",{className:"page-footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col l6 s12"},r.a.createElement("h5",{className:"white-text"},"Like CDDB?"),r.a.createElement("p",{className:"grey-text text-lighten-4"},"Support us by donating towards site maintenance costs!")),r.a.createElement("div",{className:"col l4 offset-l2 s12"},r.a.createElement("h5",{className:"white-text"},"Links"),r.a.createElement("ul",null,r.a.createElement("li",null,"Browse Custom Designs"),r.a.createElement("li",null,"Add New Custom Design"),r.a.createElement("li",null,"Manage Your Custom Designs"),r.a.createElement("li",null,"Contact Us"))))),r.a.createElement("div",{className:"footer-copyright"},r.a.createElement("div",{className:"container"},"\xa9 2020 Custom Design Database (CDDB)",r.a.createElement("p",{className:"grey-text text-lighten-4 right"},"This website has no affiliation with Nintendo or Animal Crossing."))))))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.c7fbbb82.chunk.js.map